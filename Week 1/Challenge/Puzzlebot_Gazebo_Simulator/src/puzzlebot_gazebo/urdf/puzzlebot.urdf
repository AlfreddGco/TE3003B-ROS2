<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from puzzlebot.xacro                | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- PuzzleBot differential drive -->
<robot name="puzzlebot">
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.203125 0.23828125 0.28515625 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="grey">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="orange">
    <color rgba="1.0 0.423529411765 0.0392156862745 1.0"/>
  </material>
  <material name="brown">
    <color rgba="0.870588235294 0.811764705882 0.764705882353 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.80078125 0.12890625 0.1328125 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <gazebo reference="chassis">
    <material>Gazebo/Yellow</material>
    <mu1>0.01</mu1>
    <mu2>0.01</mu2>
  </gazebo>
  <gazebo reference="left_wheel">
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <kp>500000.0</kp>
    <kd>10.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <kp>500000.0</kp>
    <kd>10.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Black</material>
  </gazebo>
  <gazebo>
<!-- 
  <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control"> 
  </plugin>
-->
  </gazebo>
  <!-- Standard Rapberry camera -->
  <gazebo reference="camera">
    <material>Gazebo/Blue</material>
    <sensor name="camera" type="camera">
      <update_rate>30.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
      </camera>
      <!-- 
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <cameraName>/camera</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>camera</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
      -->
    </sensor>
  </gazebo>
  <!-- WideAngle camera
  <gazebo reference="camera">
    <material>Gazebo/Blue</material>
    <sensor name="camera" type="wideanglecamera">
        <camera>
          <horizontal_fov>1.5707</horizontal_fov>
          <image>
            <width>320</width>
            <height>240</height>
          </image>
          <clip>
            <near>0.1</near>
            <far>100</far>
          </clip>
          <lens>
            <type>gnomonical</type>
            <scale_to_hfov>true</scale_to_hfov>
            <cutoff_angle>1.5707</cutoff_angle>
            <env_texture_size>512</env_texture_size>
          </lens>
        </camera>
        <always_on>1</always_on>
        <update_rate>30</update_rate>
    </sensor>
  </gazebo> -->
  <!-- note to self: modify this to add wheel as left and right with -->
  <!-- Dummy link to fiz robot chassis -->
  <link name="base_link">
    <pose>0 0 0 0 0 0</pose>
  </link>
  <joint name="base_link_to_chassis" type="fixed">
    <parent link="base_link"/>
    <child link="chassis"/>
  </joint>
  <link name="chassis">
    <pose>0 0 0 0 0 0</pose>
    <visual>
      <!-- box only 
      <origin xyz="0 0 0" rpy="0 0 0"/>        
          <geometry>
          	  <box size="${chassisX} ${chassisY} ${chassisZ}"/> 
          </geometry> -->
      <!-- with mesh  -->
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/alfredo/Documents/TE3003B/Week 1/Challenge/Puzzlebot_Gazebo_Simulator/install/puzzlebot_gazebo/share/puzzlebot_gazebo/meshes/chassis.stl"/>
      </geometry>
    </visual>
    <collision name="collision_chassis">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.2 0.16 0.06"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.71"/>
      <inertia ixx="0.0017276666666666666" ixy="0.0" ixz="0.0" iyy="0.002579666666666667" iyz="0.0" izz="0.0038813333333333334"/>
      <!--  <inertia
          ixx="0.001" ixy="0.0" ixz="0.0"
          iyy="0.001" iyz="0.0"
          izz="0.001"/>-->
    </inertial>
    <!-- agregar caster wheel en frame -->
    <collision>
      <origin rpy="0 0 0" xyz="-0.095 0 -0.0425"/>
      <geometry>
        <sphere radius="0.0065"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <slip1>0.0</slip1>
            <slip2>0.0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="-0.095 0 -0.0425"/>
      <geometry>
        <sphere radius="0.0065"/>
      </geometry>
    </visual>
  </link>
  <!--RIGHT WHEEL -->
  <link name="right_wheel">
    <visual>
      <origin rpy="-1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- with mesh-->
        <mesh filename="file:///home/alfredo/Documents/TE3003B/Week 1/Challenge/Puzzlebot_Gazebo_Simulator/install/puzzlebot_gazebo/share/puzzlebot_gazebo/meshes/wheel.stl"/>
        <!-- cylinder only 
	    	<cylinder length="${wheelHeight}" radius="${wheelRadius}"/> -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.5707963267948966 0 0" xyz="0 0 0 "/>
      <geometry>
        <cylinder length="0.01" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.03"/>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <!--<inertia  ixx="${m*(3*r*r+l*l)/12}" ixy = "0" ixz = "0"
                iyy="${m*(3*r*r+l*l)/12}" iyz = "0"
                izz="${m*(r*r)/2}" />-->
      <!--  <inertia  ixx="0.00001" ixy = "0" ixz = "0"
                iyy="0.00001" iyz = "0"
                izz="0.00001" />-->
      <inertia ixx="2.0171875000000004e-05" ixy="0" ixz="0" iyy="2.0171875000000004e-05" iyz="0" izz="3.984375000000001e-05"/>
    </inertial>
  </link>
  <!-- LEFT WHEEL -->
  <link name="left_wheel">
    <visual>
      <geometry>
        <!-- with mesh-->
        <mesh filename="file:///home/alfredo/Documents/TE3003B/Week 1/Challenge/Puzzlebot_Gazebo_Simulator/install/puzzlebot_gazebo/share/puzzlebot_gazebo/meshes/wheel.stl"/>
        <!-- cylinder only 
	    	<cylinder length="${wheelHeight}" radius="${wheelRadius}"/> -->
      </geometry>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.01" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.03"/>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <!--<inertia  ixx="${m*(3*r*r+l*l)/12}" ixy = "0" ixz = "0"
                iyy="${m*(3*r*r+l*l)/12}" iyz = "0"
                izz="${m*(r*r)/2}" />-->
      <!--  <inertia  ixx="0.00001" ixy = "0" ixz = "0"
                iyy="0.00001" iyz = "0"
                izz="0.00001" />-->
      <inertia ixx="2.0171875000000004e-05" ixy="0" ixz="0" iyy="2.0171875000000004e-05" iyz="0" izz="3.984375000000001e-05"/>
    </inertial>
  </link>
  <!-- CAMERA-->
  <link name="camera">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.007"/>
      <inertia ixx="0.166667" ixy="0" ixz="0" iyy="0.166667" iyz="0" izz="0.166667"/>
      <!-- ad camera inertia -->
    </inertial>
    <collision name="collision_chassis">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.01 0.06"/>
      </geometry>
    </collision>
    <visual>
      <!-- box only 
		    	    <origin rpy="$0 0 ${PI/2}" xyz="0 0 0"/>
		          <geometry>
		          	<box size="0.05 0.01 0.06" />
		          </geometry>-->
      <!-- with mesh-->
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/alfredo/Documents/TE3003B/Week 1/Challenge/Puzzlebot_Gazebo_Simulator/install/puzzlebot_gazebo/share/puzzlebot_gazebo/meshes/camera.stl"/>
      </geometry>
    </visual>
  </link>
  <!-- JOINTS  -->
  <joint name="base_to_right_w" type="continuous">
    <parent link="chassis"/>
    <child link="right_wheel"/>
    <origin xyz="0.05 -0.09 0.0"/>
    <axis rpy="0 0 0" xyz="0 1 0"/>
    <!--	<limit effort="100" velocity="100"/>
		<joint_properties damping="0.0" friction="0.0"/>-->
  </joint>
  <joint name="base_to_left_w" type="continuous">
    <parent link="chassis"/>
    <child link="left_wheel"/>
    <origin xyz="0.05 0.09 0"/>
    <axis rpy="0 0 0" xyz="0 1 0"/>
    <!--<limit effort="100" velocity="100"/>
		<joint_properties damping="0.0" friction="0.0"/>-->
  </joint>
  <!---->
  <joint name="camera_to_base" type="fixed">
    <parent link="chassis"/>
    <child link="camera"/>
    <origin rpy="0.0 0.24 0.0" xyz="0.09 0 0.048"/>
  </joint>
  <!-- TRANSMISSIONS (For a more complex model and it represents actuator attributes) -->
  <transmission name="right_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_to_right_w">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="right_wheel_motor">
      <mechanicalReduction>34</mechanicalReduction>
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <transmission name="left_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_to_left_w">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="left_wheel_motor">
      <mechanicalReduction>34</mechanicalReduction>
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
</robot>
